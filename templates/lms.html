{% load  static %}
{% block headtitle %}
    <title>{{course.title}}</title>
{% endblock headtitle %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Visualis</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="{% static '/js/bootstrap.min.js' %}"></script>
  <link href="{% static '/css/bootstrap.min.css' %}" rel="stylesheet">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@900&displgit cehcay=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
  <script src="https://kit.fontawesome.com/a076d05399.js"></script>
  <link href="{% static '/css/lms.css' %}" rel="stylesheet">
  
</head>
<body>
  <div class="container">
    <nav class="navbar navbar-expand-lg navbar-light fixed-top" style="background-color: #f5f5f5;">
          <a class="navbar-brand" href="/"><img width=125px src="{% static 'img/logo.png' %}"></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavDropdown">
      <ul class="nav navbar-nav ml-auto">
        <li name= 'home-nav' class="nav-item">
          <a class="nav-link" name = "home" href="/">Home<span class="sr-only">(current)</span></a>
        </li>
        <li name= 'courses-nav' class="nav-item">
          <a class="nav-link" name= 'courses' href="/allCourses">Courses</a>
        </li> 
        <li name= 'blogs-nav' class="nav-item">
          <a class="nav-link" name= 'blogs' href="/allBlogs">Blogs</a>
        </li> 
        <li name= 'about-nav' class="nav-item">
          <a class="nav-link" name= 'about' href="/about">About Us</a>
        </li> 
        <li class="nav-item">
          <a class="nav-link" href="#contact">Contact Us</a>
        </li>
        {% if user.is_authenticated %}
        <div class="dropdown">
          <a href="#" id="imageDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <i class="fa fa-user fa-2x" style="color:#FF8C00; padding-left : 5px; padding-right : 5px; padding-bottom : 0px ;padding-top :3px;"aria-hidden="true"></i>
          </a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="imageDropdown" >
            <li><a role="menuitem" class = "dropdown-item disabled">Hello,{{user.first_name}}</a></li>
            <li  class="divider"></li>
            
            <li><form action = "/profile" method = "POST"> {% csrf_token %}
              <input type ="hidden" name="user_id" value="{{user.id}}"/>
              <input type = "submit" class = "dropdown-item" value = "MY PROFILE" />
            </form></li>
            <li><a role="menuitem" class = "dropdown-item" href="/logout">LogOut</a></li>
          </ul>
        </div>

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Browse By Stream
          </a>
          <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
            <div class = "dropdown-submenu">
              <a class="test dropdown-item" tabindex="-1" href="#">Engineering<span class="caret"></span></a>
              <ul class = "dropdown-menu">
                <li><a tabindex="-1" class = "dropdown-item" href="/streams/cse">Cse</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="/streams/ece">Ece</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="/streams/mech">Mech</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="/streams/it">IT</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="/streams/che">Che</a></li>
              </ul>
            </div>
            <div class = "dropdown-submenu">
              <a class="test dropdown-item" tabindex="-1" href="#">Management<span class="caret"></span></a>
              <ul class = "dropdown-menu">
                <li><a tabindex="-1" class = "dropdown-item" href="#">Cse</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="#">Ece</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="#">Mech</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="#">IT</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="#">Che</a></li>
              </ul>
            </div>
            <div class = "dropdown-submenu">
              <a class="test dropdown-item" tabindex="-1" href="#">Agriculture<span class="caret"></span></a>
              <ul class = "dropdown-menu">
                <li><a tabindex="-1" class = "dropdown-item" href="#">Cse</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="#">Ece</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="#">Mech</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="#">IT</a></li>
                <li><a tabindex="-1" class = "dropdown-item" href="#">Che</a></li>
              </ul>
            </div>
            
          </div>
        </li>
      </ul>
      
      {% else %}

      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          Browse By Stream
        </a>
        <div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
          <div class = "dropdown-submenu">
            <a class="test dropdown-item" tabindex="-1" href="#">Engineering<span class="caret"></span></a>
            <ul class = "dropdown-menu">
              <li><a tabindex="-1" class = "dropdown-item" href="/streams/cse">Cse</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="/streams/ece">Ece</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="/streams/mech">Mech</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="/streams/it">IT</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="/streams/che">Che</a></li>
            </ul>
          </div>
          <div class = "dropdown-submenu">
            <a class="test dropdown-item" tabindex="-1" href="#">Management<span class="caret"></span></a>
            <ul class = "dropdown-menu">
              <li><a tabindex="-1" class = "dropdown-item" href="#">Cse</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="#">Ece</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="#">Mech</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="#">IT</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="#">Che</a></li>
            </ul>
          </div>
          <div class = "dropdown-submenu">
            <a class="test dropdown-item" tabindex="-1" href="#">Agriculture<span class="caret"></span></a>
            <ul class = "dropdown-menu">
              <li><a tabindex="-1" class = "dropdown-item" href="#">Cse</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="#">Ece</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="#">Mech</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="#">IT</a></li>
              <li><a tabindex="-1" class = "dropdown-item" href="#">Che</a></li>
            </ul>
          </div>
          
        </div>
      </li>
      <a class = "btn btn-warning" style = "justify-content: center;" href = "/login" onmouseover="this.style.color = '#ffffff'" onMouseOut="this.style.color='#000000'">SignUp/LogIn</a>
        {% endif %}
      </ul>

    </div>
    </nav>
  </div>


  <div class="sidebar" style = "margin-top: 80px;">
    <h3 class="title" >{{course.title}}</h3>
    <a href="#" data-url="{{course.pdf.url}}">Course Overview</a>
    {%for week in weeks%}
      <a href="#" data-url="{{week.link}}">Week {{week.week_no}}</a>
    {%endfor%}
    <hr>
    <hr>
    <a class="dropdown-btn">Weekly Tests
      <i class="fa fa-caret-down"></i>
    </a>
    <div class="dropdown-container">
      {%for week in weeks%}
        {% if week.test_available %}
      <form action='/test' method="POST">
        {% csrf_token %}
          <input type = "hidden" value = {{registration_id}} name ="registration_id"/>
          <input type = "hidden" value ={{week.week_id}} name = "week_id"/>
          <input type = "submit"  id="week_test" class="btn btn-rounded btn-amber" value = "Week {{week.week_no}}" />
      </form>
        {% endif %}
      {%endfor%}
    </div>

  </div>

  <div class="content" > 
    <div  id="material" class="weekly container" style=" float : right; margin-top:200px;">
          <p id="disp"></p>
    </div>
  </div>

<script>
  var dropdown = document.getElementsByClassName("dropdown-btn");
var i;

for (i = 0; i < dropdown.length; i++) {
  dropdown[i].addEventListener("click", function() {
    this.classList.toggle("active");      
    var dropdownContent = this.nextElementSibling;
    if (dropdownContent.style.display === "block") {
      dropdownContent.style.display = "none";
    } else {
      dropdownContent.style.display = "block";
    }
  });
} 
  $(document).ready(function(){
    $("#myTab a").click(function(e){
        e.preventDefault();
        $(this).tab('show');
    });
});

    $('div a').click(function(){
      $(this).addClass("active").siblings().removeClass("active");
      var source = $(this).attr('data-url');
      /*
      var star = source.indexOf("href=");
      var end = source.indexOf("type");
      var potter = document.getElementsById('dip');
      potter[0].src=source;*/
      //$("#disp").replaceWith($(source));
      $('#disp').empty();
      $('#disp').append(source);   
      //$("#disp").attr('src',source);
    });

  </script>  
</body>
</html>
